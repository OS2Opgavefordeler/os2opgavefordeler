
<div class="col-md-8 col-md-offset-2">
	
	<h1>KLE Opm√¶rkning</h1>
	<div class="col-md-2">
		<input class="form-control" type="text" data-ng-model="filterStr" placeholder="OrgUnit" />
	</div>
	<div class="col-md-10">
		
	</div>
	<br><br>

	<div class="clearfix"></div>
	
	<div data-ng-show="filterStr.length==0" class="col-md-4">
		<h2>Org Units</h2>

		<script type="text/ng-template"  id="tree_item_renderer.html">
		    <a data-ng-click="toogleChildrenVisibility(ou)">{{ou.name}} </a>
		
		    <ul>
		        <li ng-show="ou.visible" ng-repeat="ou in ou.children" ng-include="'tree_item_renderer.html'"></li>
		    </ul>
		</script>

		<ul>
		    <li data-ng-repeat="ou in ousAsTree" data-ng-include="'tree_item_renderer.html'"></li>
		</ul>
	</div>

	<div data-ng-show="filterStr.length>0"  class="col-md-4">
		<h2>Org Units</h2>
			<table class="table table-hover">
					<thead>
					<tr>
						<th>id</th>
						<th>Navn</th>
					</tr>
					</thead>
					<tbody data-ng-repeat="ou in ous | filter: { name : filterStr }">
					<h6>{{ou}}</h6>
						<tr data-ng-class="currentOrgUnit.id === ou.id ? 'success' : ''" data-ng-click="setCurrentOrgUnit(ou.id)">
							<td>{{ ou.id}} </td>
							<h6>{{ou}}</h6>
							<td>
								{{ ou.name | limitTo: 50 }}
							</td>					
						</tr>
					</tbody>
			</table>
	</div>

	<div class="col-md-8">
		<h2> {{currentOrgUnit.name}}</h2>
			<ul class="nav nav-tabs">
						  <li class="active">
						  	<a data-toggle="tab" data-ng-click="openTab('PERFORMING')">Performing</a>
						  </li>
						  <li>
						  	<a data-toggle="tab" data-ng-click="openTab('INTEREST')">Interest</a>
						  </li>
			</ul>

			<div class="tab-content">
							<div class="tab-pane active" >
									<div class="panel-body">
										<div data-ng-repeat="firstKle in currentOrgUnit.displayKles">							
											<div class="list-group-item">	
												
												<a  data-ng-click="firstKle['visible'] = !firstKle['visible']">	
													<span class="glyphicon hover" data-ng-class="firstKle['visible'] ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right'"></span>	
												</a>
												&nbsp;&nbsp;
												
												<input type="checkbox" data-ng-model="firstKle.performing" data-ng-click="modifyKle(firstKle.performing,firstKle,currentOrgUnit,'PERFORMING')"></input>
												<input type="checkbox" data-ng-model="firstKle.interest" data-ng-click="modifyKle(
												firstKle.interest, firstKle, currentOrgUnit,'INTEREST')"></input>
												{{::firstKle.number}} &nbsp;&nbsp;{{::firstKle.serviceText}}
												
											</div>

											<div  data-ng-repeat="secondKle in firstKle.children" data-ng-show="firstKle['visible']">
												<div class="list-group-item">	
												
													<a data-ng-click="secondKle['visible'] = !secondKle['visible']">
														<span class="glyphicon hover" data-ng-class="secondKle['visible'] ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right' "></span>
													</a>
													<input 
													type="checkbox" data-ng-model="secondKle.performing" data-ng-click="modifyKle(secondKle.performing,secondKle,currentOrgUnit,'PERFORMING')">	</input>
													<input 
													type="checkbox" data-ng-model="secondKle.interest" data-ng-click="modifyKle(secondKle.interest,secondKle,currentOrgUnit,'INTEREST')">	</input>
													{{::secondKle.number}} {{::secondKle.serviceText}}
													
												</div>
												<div  data-ng-repeat="thirdKle in secondKle.children" data-ng-show="secondKle['visible']">
														<div class="list-group-item">	
														
														<a data-ng-click="thirdKle['visible'] = !thirdKle['visible']">
														</a>
														
														<input type="checkbox" data-ng-model="thirdKle.performing" data-ng-click="modifyKle(thirdKle.performing,thirdKle,currentOrgUnit,'PERFORMING')">	</input>
														<input 
														type="checkbox" data-ng-model="thirdKle.interest" data-ng-click="modifyKle(thirdKle.interest,thirdKle,currentOrgUnit,'INTEREST')">	</input>
														{{::thirdKle.number}} {{::thirdKle.serviceText}}
													

														</div>
												</div>
											<div>
										</div>
									</div>		
							</div>
				
				<!--
							<div class="tab-pane" >
									<div ng-if="true" class="panel-body">
										<div data-ng-repeat="firstKle in currentOrgUnit.displayKles">							
											<div class="list-group-item">	
												<a  data-ng-click="firstKle['visible'] = !firstKle['visible']">	
													<span class="glyphicon hover" data-ng-class="firstKle['visible'] ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right'"></span>	
												</a>
												&nbsp;&nbsp;
												<input type="checkbox" data-ng-model="firstKle.performing" data-ng-click="modifyKle(firstKle.performing,firstKle,currentOrgUnit,'PERFORMING')"></input>
												<input type="checkbox" data-ng-model="firstKle.interest" data-ng-click="modifyKle(
												firstKle.interest, firstKle, currentOrgUnit,'INTEREST')"></input>
												{{firstKle.number}} &nbsp;&nbsp;{{firstKle.serviceText}}
											</div>

											<div  data-ng-repeat="secondKle in firstKle.children" data-ng-show="firstKle['visible']">
												<div class="list-group-item">	
													<a data-ng-click="secondKle['visible'] = !secondKle['visible']">
														<span class="glyphicon hover" data-ng-class="secondKle['visible'] ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right' "></span>
													</a> 
													<input 
													type="checkbox" data-ng-model="secondKle.performing" data-ng-click="modifyKle(secondKle.performing,secondKle,currentOrgUnit,'PERFORMING')">	</input>
													<input 
													type="checkbox" data-ng-model="secondKle.interest" data-ng-click="modifyKle(secondKle.interest,secondKle,currentOrgUnit,'INTEREST')">	</input>
													{{secondKle.number}} {{secondKle.serviceText}}
												</div>
												<div  data-ng-repeat="thirdKle in secondKle.children" data-ng-show="secondKle['visible']">
														<div class="list-group-item">	
														<a data-ng-click="thirdKle['visible'] = !thirdKle['visible']">
														</a>
														<input type="checkbox" data-ng-model="thirdKle.performing" data-ng-click="modifyKle(thirdKle.performing,thirdKle,currentOrgUnit,'PERFORMING')">	</input>
														<input 
														type="checkbox" data-ng-model="thirdKle.interest" data-ng-click="modifyKle(thirdKle.interest,thirdKle,currentOrgUnit,'INTEREST')">	</input>

														{{thirdKle.number}} {{thirdKle.serviceText}}
														</div>
												</div>
											<div>
										</div>
									</div>		
							</div>
							-->
			</div>

	</div>